% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spatial_field.R
\name{prepare_spatial_data}
\alias{prepare_spatial_data}
\title{Prepare Spatial Field for Downscaling}
\usage{
prepare_spatial_data(
  spatial_field,
  observation_data,
  response,
  region_list = NULL,
  integration_rule = NULL,
  parallel = FALSE,
  compute_cholesky = FALSE,
  ...
)
}
\arguments{
\item{spatial_field}{A spatial_field() object (basis + prior + integration rule).}

\item{observation_data}{An sf object containing the observations, including the response column.}

\item{response}{Character string naming the response column in \code{observation_data}.}

\item{region_list}{Optional: precomputed list of regions (overrides auto-building).}

\item{integration_rule}{Optional: override the integration rule in the spatial_field.}

\item{parallel}{Logical or integer: whether/how to parallelize integration.}

\item{compute_cholesky}{Logical: whether to compute and return the Cholesky of XtX + Lambda.}

\item{...}{Additional arguments passed to integration functions.}
}
\value{
A list with:
\itemize{
\item y: the response vector.
\item X_spatial: the integrated design matrix.
\item XtX: Xáµ—X matrix
\item Lambda: prior precision matrix
\item posterior_precision: XtX + Lambda
\item cholesky_factor: Cholesky of XtX + Lambda (if requested)
\item basis, prior, integration_rule, region_list, etc.
}
}
\description{
Integrates the basis functions of a spatial field over observation regions,
and optionally extracts the response variable.
}
