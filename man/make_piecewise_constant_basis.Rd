% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/basis.R
\name{make_piecewise_constant_basis}
\alias{make_piecewise_constant_basis}
\title{Construct a Piecewise Constant Basis from Polygonal Geometry and Values}
\usage{
make_piecewise_constant_basis(geometry, values, crs = NULL, metadata = list())
}
\arguments{
\item{geometry}{An \code{sf} object of polygons defining the support of the basis.
Each row defines one spatial tile (e.g., grid cell).}

\item{values}{A numeric vector of length \code{nrow(geometry)} (for scalar field),
or a numeric matrix with \code{nrow(values) == nrow(geometry)}
and \code{k} columns for multivariate fields.}

\item{crs}{Optional CRS; inferred from geometry if missing.}

\item{metadata}{Optional metadata list.}
}
\value{
A \code{"basis"} object (subclass \code{"piecewise_constant_basis"}) with:
\itemize{
\item \code{geometry}: the input sf polygons
\item \code{values}: the piecewise constant values per polygon (matrix with k columns)
\item \code{evaluate_fn}: returns values matched to points (slow; uses st_intersects)
\item \code{k}: number of basis functions (columns of values)
\item \code{crs}: spatial reference
\item \code{metadata}: user-defined metadata
}
}
\description{
Creates a spatial basis object where a spatial function is defined piecewise constant
over a set of polygons (e.g., grid cells). This is typically used for representing
covariates or low-rank models with known spatial structure.
}
\details{
The resulting basis has \code{k = 1} by default (scalar field). You can supply
a matrix of values to construct a multivariate basis with \code{k > 1}.
}
